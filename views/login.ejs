<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	<meta name="api-url" content="<%=process.env.API_URL%>">
	<title>Electro - HTML Ecommerce Template</title>

	<!-- Google font -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">

	<!-- Bootstrap -->
	<link type="text/css" rel="stylesheet" href="stylesheets/bootstrap.min.css"/>

	<!-- Slick -->
	<link type="text/css" rel="stylesheet" href="stylesheets/slick.css"/>
	<link type="text/css" rel="stylesheet" href="stylesheets/slick-theme.css"/>

	<!-- nouislider -->
	<link type="text/css" rel="stylesheet" href="stylesheets/nouislider.min.css"/>
	<link rel="stylesheet" href="stylesheets/main.css">
	<!-- Font Awesome Icon -->
	<link rel="stylesheet" href="stylesheets/font-awesome.min.css">

	<!-- Custom stlylesheet -->
	<link type="text/css" rel="stylesheet" href="stylesheets/style.css"/>

	<!-- HTML5 shim and Respond.javascripts for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.javascripts doesn't work if you view the page via file:// -->
 		<!--[if lt IE 9]>
 		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.javascripts"></script>
 		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.javascripts"></script>
 		<![endif]-->

 	</head>
 	<body>
 		<!-- HEADER -->
 		<%include header%>
 		<!-- /HEADER -->

 		<!--NAV BAR-->
 		<%include nav-bar%>

 		<!-- BREADCRUMB -->
 		<div id="breadcrumb" class="section">
 			<!-- container -->
 			<div class="container">
 				<!-- row -->
 				<div class="row">
 					<div class="col-md-12">
 						<h3 class="breadcrumb-header">Regular Page</h3>
 						<ul class="breadcrumb-tree">
 							<li><a href="#">Home</a></li>
 							<li class="active">Login</li>
 						</ul>
 					</div>
 				</div>
 				<!-- /row -->
 			</div>
 			<!-- /container -->
 		</div>
 		<!-- /BREADCRUMB -->

 		<!-- SECTION -->
 		<div class="section">
 			<!-- container -->
 			<div class="container">
 				<!-- row -->
 				<div class="row">
 				</div>
 				<!-- /row -->
 			</div>
 			<!-- /container -->
 		</div>
 		<!-- /SECTION -->


 		<!-- Start My Account -->
 		<div class="container">
 			<div class="row">
 				<div class="col-md-6">
 					<div class="login-form">
 						<h3 class="billing-title text-center">Đăng nhập</h3>
 						<p class="text-center mt-80 mb-40">Chào mừng trở lại! đăng nhập vào tài khoản của bạn </p>
 						<div class="alert alert-danger login-fail" role="alert" style="display: none">
 							Tài khoản hoặc mật khẩu không chính xác
 						</div>
 						<input type="text" placeholder="Tên tài khoản*" name="lg_username" class="input" required="" onfocus="this.placeholder=''" onblur="this.placeholder = 'Tên tài khoản*'">
 						<input type="password"  placeholder="Mật khẩu*" name="lg_password" class="input mt-20" required="" onfocus="this.placeholder=''" onblur="this.placeholder ='Mật khẩu*'">
 						<button class="view-btn color-2 mt-20 w-100 btn-login" ><span>Đăng nhập</span></button>
 						<div class="mt-20 d-flex align-items-center justify-content-between text-center">
 							<a href="/forgetpass">Quên mật khẩu?</a>
 						</div>
 					</div>
 				</div>
 				<div class="col-md-6">
 					<div class="register-form">
 						<h3 class="billing-title text-center">Đăng ký</h3>
 						<p class="text-center mt-40 mb-30">Tạo tài khoản của riêng bạn </p>
 						<input type="text" name="rg_full_name" placeholder="Họ và tên" class="common-input mt-20" required="" onfocus="this.placeholder=''" onblur="this.placeholder = 'Họ và tên'">
 						<div class="invalid-feedback d-block invalid-fullname"></div>
 						<input type="email" name="rg_email" placeholder="Địa chỉ email*" class="common-input mt-20" required="" onblur="this.placeholder">
 						<div class="invalid-feedback d-block invalid-email"></div>
 						<input type="text" name="rg_phone" placeholder="Số điện thoại*" class="common-input mt-20" required="" >
 						<div class="invalid-feedback d-block invalid-phone"></div>
 						<input type="text" name="rg_username" placeholder="Tên tài khoản*" class="common-input mt-20" required=""  onblur="this.placeholder ='Tên tài khoản*'">
 						<div class="invalid-feedback d-block invalid-username"></div>
 						<input type="password" name="rg_password" placeholder="Mật khẩu*" class="common-input mt-20" required=""  onblur="this.placeholder = 'Mật khẩu*'">
 						<div class="invalid-feedback d-block invalid-password"></div>
 						<input type="password" name="rg_password2" placeholder="Nhập lại mật khẩu*" class="common-input mt-20" required="" onblur="this.placeholder = 'Nhập lại mật khẩu*'">
 						<div class="invalid-feedback d-block invalid-password2"></div>
 						<button class="view-btn color-2 mt-20 w-100 btn-register"><span>Đăng ký</span></button>
 					</div>
 				</div>
 			</div>
 		</div>
 		<br>
 		<!-- End My Account -->
 		<!-- NEWSLETTER -->
 		<div id="newsletter" class="section">
 			<!-- container -->
 			<div class="container">
 				<!-- row -->
 				<div class="row">
 					<div class="col-md-12">
 						<div class="newsletter">
 							<p>Sign Up for the <strong>NEWSLETTER</strong></p>
 							<form>
 								<input class="input" type="email" placeholder="Enter Your Email">
 								<button class="newsletter-btn"><i class="fa fa-envelope"></i> Subscribe</button>
 							</form>
 							<ul class="newsletter-follow">
 								<li>
 									<a href="#"><i class="fa fa-facebook"></i></a>
 								</li>
 								<li>
 									<a href="#"><i class="fa fa-twitter"></i></a>
 								</li>
 								<li>
 									<a href="#"><i class="fa fa-instagram"></i></a>
 								</li>
 								<li>
 									<a href="#"><i class="fa fa-pinterest"></i></a>
 								</li>
 							</ul>
 						</div>
 					</div>
 				</div>
 				<!-- /row -->
 			</div>
 			<!-- /container -->
 		</div>
 		<!-- /NEWSLETTER -->

 		<!-- FOOTER -->
 		<footer id="footer">
 			<!-- top footer -->
 			<div class="section">
 				<!-- container -->
 				<div class="container">
 					<!-- row -->
 					<div class="row">
 						<div class="col-md-3 col-xs-6">
 							<div class="footer">
 								<h3 class="footer-title">About Us</h3>
 								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut.</p>
 								<ul class="footer-links">
 									<li><a href="#"><i class="fa fa-map-marker"></i>1734 Stonecoal Road</a></li>
 									<li><a href="#"><i class="fa fa-phone"></i>+021-95-51-84</a></li>
 									<li><a href="#"><i class="fa fa-envelope-o"></i>email@email.com</a></li>
 								</ul>
 							</div>
 						</div>

 						<div class="col-md-3 col-xs-6">
 							<div class="footer">
 								<h3 class="footer-title">Categories</h3>
 								<ul class="footer-links">
 									<li><a href="#">Hot deals</a></li>
 									<li><a href="#">Laptops</a></li>
 									<li><a href="#">Smartphones</a></li>
 									<li><a href="#">Cameras</a></li>
 									<li><a href="#">Accessories</a></li>
 								</ul>
 							</div>
 						</div>

 						<div class="clearfix visible-xs"></div>

 						<div class="col-md-3 col-xs-6">
 							<div class="footer">
 								<h3 class="footer-title">Information</h3>
 								<ul class="footer-links">
 									<li><a href="#">About Us</a></li>
 									<li><a href="#">Contact Us</a></li>
 									<li><a href="#">Privacy Policy</a></li>
 									<li><a href="#">Orders and Returns</a></li>
 									<li><a href="#">Terms & Conditions</a></li>
 								</ul>
 							</div>
 						</div>

 						<div class="col-md-3 col-xs-6">
 							<div class="footer">
 								<h3 class="footer-title">Service</h3>
 								<ul class="footer-links">
 									<li><a href="#">My Account</a></li>
 									<li><a href="#">View Cart</a></li>
 									<li><a href="#">Wishlist</a></li>
 									<li><a href="#">Track My Order</a></li>
 									<li><a href="#">Help</a></li>
 								</ul>
 							</div>
 						</div>
 					</div>
 					<!-- /row -->
 				</div>
 				<!-- /container -->
 			</div>
 			<!-- /top footer -->

 			<!-- bottom footer -->
 			<div id="bottom-footer" class="section">
 				<div class="container">
 					<!-- row -->
 					<div class="row">
 						<div class="col-md-12 text-center">
 							<ul class="footer-payments">
 								<li><a href="#"><i class="fa fa-cc-visa"></i></a></li>
 								<li><a href="#"><i class="fa fa-credit-card"></i></a></li>
 								<li><a href="#"><i class="fa fa-cc-paypal"></i></a></li>
 								<li><a href="#"><i class="fa fa-cc-mastercard"></i></a></li>
 								<li><a href="#"><i class="fa fa-cc-discover"></i></a></li>
 								<li><a href="#"><i class="fa fa-cc-amex"></i></a></li>
 							</ul>
 							<span class="copyright">
 								<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
 								Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
 								<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
 							</span>


 						</div>
 					</div>
 					<!-- /row -->
 				</div>
 				<!-- /container -->
 			</div>
 			<!-- /bottom footer -->
 		</footer>
 		<!-- /FOOTER -->

 		<!-- jQuery Plugins -->
 		<script src="javascripts/jquery.min.js"></script>
 		<script src="javascripts/bootstrap.min.js"></script>
 		<script src="javascripts/slick.min.js"></script>
 		<script src="javascripts/nouislider.min.js"></script>
 		<script src="javascripts/jquery.zoom.min.js"></script>
 		<script src="javascripts/main.js"></script>
 		<script type="text/javascript">
 			$(document).ready(function(){
 				var apiUrl = $('meta[name="api-url"]').attr('content');
 				$('.btn-login').click(function(){
 					var username = $('input[name="lg_username"]').val();
 					var password = $('input[name="lg_password"]').val();
 					$.ajax({
 						url: '/login',
 						type:'post',
 						data:{username:username,password:password},
 					}).done(function(res){
 						// console.log(res);
						location.href='/';

					}).fail(function(res){
						var ms = res.responseJSON;
						if(res.status==401){
							$('.login-fail').html('Tài khoản hoặc mật khẩu không chính xác').show();
						}
						else if(res.status==400){
							$('.login-fail').html('Vui lòng nhập đủ thông tin').show();
						}
						else{
							alert('Lỗi. Thử lại sau!');
						}
					})
				});

 				$('.btn-register').click(function(){
 					var fullname = $('input[name="rg_full_name"]').val().trim();
 					var username = $('input[name="rg_username"]').val().trim();
 					var password = $('input[name="rg_password"]').val();
 					var email = $('input[name="rg_email"]').val().trim();
 					var phone = $('input[name="rg_phone"]').val().trim();
 					var password2 = $('input[name="rg_password2"]').val();
 					$.ajax({
 						url: '/register',
 						type:'post',
 						data:{fullname:fullname,email:email,phone:phone,username:username,password:password,password2:password2},
 						dataType: 'json',
 					}).done(function(res){
						location.href='/';

					}).fail(function(res){
						var ms = res.responseJSON;
						if(res.status==422){
							ms.errors.forEach(function(error){
								var error_msg = error.msg;
								$('.invalid-'+error.param).html(error_msg).show();
							})
						}
						else{
							alert('Lỗi. Thử lại sau!');
						}
					})
				});
 			})

 		</script>

 	</body>
 	</html>
